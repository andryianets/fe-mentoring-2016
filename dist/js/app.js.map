{"version":3,"sources":["../../src/js/app.js"],"names":["NewsAPI","App","categoriesChoicesElement","document","getElementById","countriesChoicesElement","langChoicesElement","contentElement","currentChoices","newsClient","Client","initChoices","updateSources","innerHTML","getChoiceTpl","concat","availableCategories","map","value","join","availableCountries","availableLanguages","selectedNode","radiosContainer","parentElement","Array","from","getElementsByTagName","forEach","labelNode","className","undefined","param","name","promise","getSources","then","formattedSources","data","sources","getSourceTpl","source","catch","handleError","bind","sourcesElement","children","length","getArticles","formattedArticles","articles","getArticleTpl","article","label","checked","id","urlsToLogos","medium","url","title","urlToImage","error"],"mappings":"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","file":"app.js","sourcesContent":["if (!NewsAPI) throw 'NewsAPI lib not included';\r\n\r\nclass App {\r\n\r\n    /* Public */\r\n\r\n    constructor() {\r\n        this.categoriesChoicesElement = document.getElementById('categoriesChoices');\r\n        this.countriesChoicesElement = document.getElementById('countriesChoices');\r\n        this.langChoicesElement = document.getElementById('langChoices');\r\n        this.contentElement = document.getElementById('content');\r\n\r\n        this.currentChoices = {};\r\n\r\n        this.newsClient = new NewsAPI.Client('a90095ec1a4d42d0a97bc23915858b11');\r\n    }\r\n\r\n    init() {\r\n        this.initChoices();\r\n        this.updateSources();\r\n    }\r\n\r\n    initChoices() {\r\n        this.categoriesChoicesElement.innerHTML = [this.getChoiceTpl('category', 'All', '', true)].concat(\r\n            NewsAPI.Client.availableCategories.map(value => this.getChoiceTpl('category', value, value))\r\n        ).join('');\r\n\r\n        this.countriesChoicesElement.innerHTML = [this.getChoiceTpl('country', 'All', '', true)].concat(\r\n            NewsAPI.Client.availableCountries.map(value => this.getChoiceTpl('country', value, value))\r\n        ).join('');\r\n\r\n        this.langChoicesElement.innerHTML = [this.getChoiceTpl('language', 'All', '', true)].concat(\r\n            NewsAPI.Client.availableLanguages.map(value => this.getChoiceTpl('language', value, value))\r\n        ).join('');\r\n    }\r\n\r\n    updateSources(selectedNode) {\r\n        if (selectedNode) {\r\n            const radiosContainer = selectedNode.parentElement.parentElement;\r\n            Array.from(radiosContainer.getElementsByTagName('label')).forEach(labelNode => {\r\n                labelNode.className = labelNode === selectedNode.parentElement ? 'selected' : undefined;\r\n            });\r\n\r\n            const {name: param, value} = selectedNode;\r\n            this.currentChoices[param] = value;\r\n        }\r\n\r\n        const promise = this.newsClient.getSources(this.currentChoices)\r\n            .then(data => {\r\n                const formattedSources = data.sources.map(source => this.getSourceTpl(source));\r\n                this.contentElement.innerHTML = formattedSources.join('');\r\n                return data.sources;\r\n            })\r\n            .catch(this.handleError.bind(this));\r\n    }\r\n\r\n    updateArticles(source) {\r\n        const sourcesElement = document.getElementById(`articles_of_${source}`);\r\n        if (sourcesElement.children.length > 0) {\r\n            sourcesElement.innerHTML = '';\r\n        } else {\r\n            this.newsClient.getArticles({source})\r\n                .then(data => {\r\n                    const formattedArticles = data.articles.map(article => this.getArticleTpl(article));\r\n                    sourcesElement.innerHTML = formattedArticles.join('');\r\n                })\r\n                .catch(this.handleError.bind(this));\r\n        }\r\n    }\r\n\r\n\r\n    /* Private */\r\n\r\n    getChoiceTpl(name, label, value, checked) {\r\n        return `<label for=\"${name}_${value}\" class=\"${checked && 'selected'}\">\r\n                    <input type=\"radio\" id=\"${name}_${value}\" name=\"${name}\" value=\"${value}\" onchange=\"app.updateSources(this)\" ${checked && 'checked'} />\r\n                    ${label}\r\n                </label>`;\r\n    }\r\n\r\n    getSourceTpl(source) {\r\n        return `<div class=\"source\" id=\"source_${source.id}\">\r\n                    <div class=\"logo\">\r\n                        <a href=\"javascript:void(0)\" title=\"${source.name}\" onclick=\"app.updateArticles('${source.id}')\">\r\n                            <img src=\"${source.urlsToLogos.medium}\" height=\"60\" />\r\n                        </a>\r\n                    </div>\r\n                    <div class=\"articles\" id=\"articles_of_${source.id}\"></div>\r\n                </div>`;\r\n    }\r\n\r\n    getArticleTpl(article) {\r\n        //return `<pre>${JSON.stringify(article, undefined, ' ')}</pre>`;\r\n\r\n        return `<a href=\"${article.url}\" target=\"_blank\" title=\"${article.title}\">\r\n                    <img src=\"${article.urlToImage}\" height=\"120\" />\r\n                </a>`;\r\n    }\r\n\r\n    handleError(error) {\r\n        this.contentElement.innerHTML = `<h4 class=\"error\">${error}</h4>`;\r\n    }\r\n\r\n}\r\n"]}